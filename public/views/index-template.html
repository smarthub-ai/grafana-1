<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000" />

    <title>[[.AppTitle]]</title>

    <base href="[[.AppSubUrl]]/" />

    <link
      rel="preload"
      href="[[.ContentDeliveryURL]]public/fonts/roboto/RxZJdnzeo3R5zSexge8UUVtXRa8TVwTICgirnJhmVJw.woff2"
      as="font"
      crossorigin
    />

    <link rel="icon" type="image/png" href="public/img/smarthub_icon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="[[.AppleTouchIcon]]" />
    <link rel="mask-icon" href="[[.ContentDeliveryURL]]public/img/smarthub_icon.png" color="#F05A28" />
    <link
      rel="stylesheet"
      href="[[.ContentDeliveryURL]]public/build/grafana.[[ .Theme ]].<%= compilation.hash %>.css"
    />

    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_css_time_seconds');
    </script>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="public/img/browserconfig.xml" />
  </head>

  <body class="theme-[[ .Theme ]] [[.AppNameBodyClass]]">
    <style>
      .preloader {
        height: 100%;
        flex-direction: column;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .preloader__enter {
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-iteration-count: 1;
        animation-duration: 0.9s;
        animation-delay: 1.35s;
        animation-fill-mode: forwards;
      }

      .preloader__bounce {
        text-align: center;
        animation-name: preloader-bounce;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
      }

      .preloader__logo {
        display: inline-block;
        animation-name: preloader-squash;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
        width: 60px;
        height: 60px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Ctitle%3EIOT logo%3C/title%3E%3Cg id='998d957f-a2db-4b5b-a060-402777ef4b0c' data-name='Layer 2'%3E%3Cpath d='M84.69,302.18a158.87,158.87,0,0,1-36.94-57.61,70.4,70.4,0,0,1-20.37-11.78A175.69,175.69,0,0,0,157.15,360.23a52.45,52.45,0,0,1,.92-16.24A158.35,158.35,0,0,1,84.69,302.18Z' fill='%230065ab'/%3E%3Cpath d='M197.33,14.25A175.68,175.68,0,0,0,38.22,115.77,70,70,0,0,1,60.43,108,160.38,160.38,0,0,1,84.69,76.9a159.65,159.65,0,0,1,172.67-35,82.68,82.68,0,0,1,6-6.73,80.4,80.4,0,0,1,6.09-5.5A174.72,174.72,0,0,0,197.33,14.25Z' fill='%230065ab'/%3E%3Cpath d='M118.81,124q2.94-3.51,6.22-6.8a102.47,102.47,0,0,1,115-20.59c-.09-1.6-.15-3.2-.15-4.82a80.05,80.05,0,0,1,.93-12.23A118.25,118.25,0,0,0,105.53,115,70.3,70.3,0,0,1,118.81,124Z' fill='%230065ab'/%3E%3Cpath d='M314.16,171.68a80.21,80.21,0,0,1-16.78-3,102.28,102.28,0,0,1-189.3,70.86A69.82,69.82,0,0,1,93.35,246a118.23,118.23,0,0,0,220.81-74.27Z' fill='%230065ab'/%3E%3Cpath d='M369.24,155a80.11,80.11,0,0,1-14.64,9.07,161.52,161.52,0,0,1,2,25.45,159.62,159.62,0,0,1-100.07,148,52.76,52.76,0,0,1,3,16,175.6,175.6,0,0,0,113.09-164A176.68,176.68,0,0,0,369.24,155Z' fill='%230065ab'/%3E%3Cpath d='M320,137.93a46.09,46.09,0,1,1,32.61-13.49h0A46,46,0,0,1,320,137.93Zm0-76.2a30.1,30.1,0,1,0,21.3,8.81A30,30,0,0,0,320,61.73Z' fill='%2336c9e1'/%3E%3Cpath d='M72.58,217a39,39,0,1,1,27.61-11.42A38.89,38.89,0,0,1,72.58,217Zm0-62.07a23,23,0,1,0,16.3,6.74A23,23,0,0,0,72.58,154.93Z' fill='%2336c9e1'/%3E%3Cpath d='M208.22,385.75a30,30,0,0,1-21.52-9,31,31,0,0,1,0-43.39,30.15,30.15,0,0,1,43.05,0,31,31,0,0,1,0,43.39h0A30,30,0,0,1,208.22,385.75Zm0-47.46a16.14,16.14,0,0,0-11.56,4.87,17,17,0,0,0,0,23.73,16.17,16.17,0,0,0,23.11,0h0a17,17,0,0,0,0-23.73A16.1,16.1,0,0,0,208.22,338.29Z' fill='%2336c9e1'/%3E%3Cpath d='M195.1,251.13a59.45,59.45,0,1,1,42-17.41h0A59,59,0,0,1,195.1,251.13Zm0-102.88a43.44,43.44,0,1,0,30.72,74.15h0a43.43,43.43,0,0,0-30.72-74.15Z' fill='%2336c9e1'/%3E%3C/g%3E%3C/svg%3E");
      }

      .preloader__text {
        margin-top: 16px;
        font-weight: 500;
        font-size: 14px;
        font-family: Sans-serif;
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-duration: 0.9s;
        animation-delay: 1.8s;
        animation-fill-mode: forwards;
      }

      .theme-light .preloader__text {
        color: #52545c;
      }

      .theme-dark .preloader__text {
        color: #d8d9da;
      }

      @keyframes preloader-fade-in {
        0% {
          opacity: 0;
          /*animation-timing-function: linear;*/
          animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes preloader-bounce {
        from,
        to {
          transform: translateY(0px);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
        }
        50% {
          transform: translateY(-50px);
          animation-timing-function: cubic-bezier(0.9, 0, 0.7, 1);
        }
      }

      @keyframes preloader-squash {
        0% {
          transform: scaleX(1.3) scaleY(0.8);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
          transform-origin: bottom center;
        }
        15% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0.7, 0.75);
          transform-origin: bottom center;
        }
        55% {
          transform: scaleX(1.05) scaleY(0.95);
          animation-timing-function: cubic-bezier(0.9, 0, 1, 1);
          transform-origin: top center;
        }
        95% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0, 1);
          transform-origin: bottom center;
        }
        100% {
          transform: scaleX(1.3) scaleY(0.8);
          transform-origin: bottom center;
          animation-timing-function: cubic-bezier(0, 0, 0.7, 1);
        }
      }

      /* Fail info */
      .preloader__text--fail {
        display: none;
      }

      /* stop logo animation */
      .preloader--done .preloader__bounce,
      .preloader--done .preloader__logo {
        animation-name: none;
        display: none;
      }

      .preloader--done .preloader__logo,
      .preloader--done .preloader__text {
        display: none;
        color: #ff5705 !important;
        font-size: 15px;
      }

      .preloader--done .preloader__text--fail {
        display: block;
      }

      [ng\:cloak],
      [ng-cloak],
      .ng-cloak {
        display: none !important;
      }
    </style>

    <div class="preloader">
      <div class="preloader__enter">
        <div class="preloader__bounce">
          <div class="preloader__logo"></div>
        </div>
      </div>
      <div class="preloader__text">Loading Insights</div>
      <div class="preloader__text preloader__text--fail">
        <p>
          <strong>If you're seeing this Insights has failed to load its application files</strong>
          <br />
          <br />
        </p>
        <p>
          1. This could be caused by your reverse proxy settings.<br /><br />
          2. If you host grafana under subpath make sure your grafana.ini root_url setting includes subpath. If not
          using a reverse proxy make sure to set serve_from_sub_path to true.<br />
          <br />
          3. If you have a local dev build make sure you build frontend using: yarn start, yarn start:hot, or yarn
          build<br />
          <br />
          4. Sometimes restarting grafana-server can help<br />
          <br />
          5. Check if you are using a non-supported browser. For more information, refer to the list of
          <a href="https://grafana.com/docs/grafana/latest/installation/requirements/#supported-web-browsers">
            supported browsers</a
          >.
        </p>
      </div>
      <script nonce="[[.Nonce]]">
        // Check to see if browser is not supported by Grafana
        // Source file in app/core/utils/browser.ts & tests make edits there and copy compiled typescript here
        function checkBrowserCompatibility() {
          var isIE = navigator.userAgent.indexOf('MSIE') > -1;
          var isEdge = navigator.userAgent.indexOf('Edge/') > -1 || navigator.userAgent.indexOf('Edg/') > -1;
          var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
          var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);

          /* Check for
          <= IE11 (Trident 7)
          Edge <= 16
          Firefox <= 64
          Chrome <= 54
          */
          var isEdgeVersion = /Edge\/([0-9.]+)/.exec(navigator.userAgent);

          if (isIE && parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 7) {
            return false;
          } else if (
            isEdge &&
            ((isEdgeVersion && parseFloat(isEdgeVersion[1]) <= 16) ||
              parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 16)
          ) {
            return false;
          } else if (isFirefox && parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 64) {
            return false;
          } else if (isChrome && parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 54) {
            return false;
          }

          return true;
        }

        if (!checkBrowserCompatibility()) {
          alert('Your browser is not fully supported, please try newer version.');
        }
      </script>
    </div>

    <div id="reactRoot"></div>

    <script nonce="[[.Nonce]]">
      window.grafanaBootData = {
        user: [[.User]],
        settings: [[.Settings]],
        navTree: [[.NavTree]],
        themePaths: {
          light: '[[.ContentDeliveryURL]]public/build/grafana.light.<%= compilation.hash %>.css',
          dark: '[[.ContentDeliveryURL]]public/build/grafana.dark.<%= compilation.hash %>.css'
        }
      };

      window.__grafana_load_failed = function() {
        var preloader = document.getElementsByClassName("preloader");
        if (preloader.length) {
          preloader[0].className = "preloader preloader--done";
        }
      }

      // In case the js files fails to load the code below will show an info message.
      window.onload = function() {
        if (window.__grafana_app_bundle_loaded) {
          return;
        }
        window.__grafana_load_failed();
      };

      [[if .ContentDeliveryURL]]
        window.public_cdn_path = '[[.ContentDeliveryURL]]public/build/';
      [[end]]
      [[if .Nonce]]
        window.nonce = '[[.Nonce]]';
      [[end]]
    </script>

    [[if .GoogleTagManagerId]]
    <!-- Google Tag Manager -->
    <script nonce="[[.Nonce]]">
      dataLayer = [
        {
          IsSignedIn: '[[.User.IsSignedIn]]',
          Email: '[[.User.Email]]',
          Name: '[[.User.Name]]',
          UserId: '[[.User.Id]]',
          OrgId: '[[.User.OrgId]]',
          OrgName: '[[.User.OrgName]]',
        },
      ];
    </script>
    <noscript>
      <iframe
        src="//www.googletagmanager.com/ns.html?id=[[.GoogleTagManagerId]]"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe>
    </noscript>
    <script nonce="[[.Nonce]]">
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', '[[.GoogleTagManagerId]]');
    </script>
    <!-- End Google Tag Manager -->
    [[end]] <% for (index in htmlWebpackPlugin.files.js) { %> <% if (htmlWebpackPlugin.files.jsIntegrity) { %>
    <script
      nonce="[[.Nonce]]"
      src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.js[index] %>"
      type="text/javascript"
      integrity="<%= htmlWebpackPlugin.files.jsIntegrity[index] %>"
      crossorigin="<%= webpackConfig.output.crossOriginLoading %>"
    ></script>
    <% } else { %>
    <script
      nonce="[[.Nonce]]"
      src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.js[index] %>"
      type="text/javascript"
    ></script>
    <% } %> <% } %>

    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_js_done_time_seconds');
    </script>
  </body>
</html>
